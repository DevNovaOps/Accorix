{% extends 'base.html' %}

{% block title %}{{ title }} - ERP Budget{% endblock %}

{% block content %}
<div class="view-section active">
    <div class="page-title">{{ title }}</div>

    <div class="card">
        <form method="post" enctype="multipart/form-data" style="display: flex; flex-direction: column; gap: 25px;">
            {% csrf_token %}
            
            {% if form.non_field_errors %}
                <div style="background: rgba(239,68,68,0.15); border: 1px solid var(--danger); color: var(--danger); padding: 12px; border-radius: 8px;">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}
            
            <!-- First Row: Product Name and SKU -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start;">
                <div class="form-group">
                    <label>Product Name *</label>
                    {{ form.name }}
                    {% if form.name.errors %}
                    <div style="color:var(--danger); font-size:0.85rem; margin-top:5px;">{{ form.name.errors.0 }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label>SKU *</label>
                    {{ form.sku }}
                    {% if form.sku.errors %}
                    <div style="color:var(--danger); font-size:0.85rem; margin-top:5px;">{{ form.sku.errors.0 }}</div>
                    {% endif %}
                </div>
            </div>

            <!-- Second Row: Category and Unit Price -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start;">
                <div class="form-group">
                    <label>Category</label>
                    {{ form.category }}
                    {% if form.category.errors %}
                    <div style="color:var(--danger); font-size:0.85rem; margin-top:5px;">{{ form.category.errors.0 }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label>Unit Price *</label>
                    {{ form.unit_price }}
                    {% if form.unit_price.errors %}
                    <div style="color:var(--danger); font-size:0.85rem; margin-top:5px;">{{ form.unit_price.errors.0 }}</div>
                    {% endif %}
                </div>
            </div>

            <!-- Third Row: Sale Price and Purchase Price -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start;">
                <div class="form-group">
                    <label>Sale Price</label>
                    {{ form.sale_price }}
                    {% if form.sale_price.errors %}
                    <div style="color:var(--danger); font-size:0.85rem; margin-top:5px;">{{ form.sale_price.errors.0 }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label>Purchase Price</label>
                    {{ form.purchase_price }}
                    {% if form.purchase_price.errors %}
                    <div style="color:var(--danger); font-size:0.85rem; margin-top:5px;">{{ form.purchase_price.errors.0 }}</div>
                    {% endif %}
                </div>
            </div>

            <!-- Description Section -->
            <div class="form-group">
                <label>Description</label>
                {{ form.description }}
                {% if form.description.errors %}
                <div style="color:var(--danger); font-size:0.85rem; margin-top:5px;">{{ form.description.errors.0 }}</div>
                {% endif %}
            </div>

            <!-- Image Upload -->
            <div class="form-group">
                <label>Image</label>
                {{ form.image }}
                {% if form.image.errors %}
                <div style="color:var(--danger); font-size:0.85rem; margin-top:5px;">{{ form.image.errors.0 }}</div>
                {% endif %}
            </div>

            <!-- Tags -->
            <div class="form-group">
                <label>Tags</label>
                {{ form.tags_input }}
                {% if form.tags_input.errors %}
                <div style="color:var(--danger); font-size:0.85rem; margin-top:5px;">{{ form.tags_input.errors.0 }}</div>
                {% endif %}
            </div>

            <!-- Action Buttons -->
            <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 10px;">
                <button type="submit" class="btn-primary">Save Product</button>
                <a href="{% url 'product_list' %}" class="btn-secondary" style="text-decoration:none; display:inline-block; text-align:center;">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}